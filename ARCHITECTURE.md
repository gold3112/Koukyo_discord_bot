# æŠ€è¡“ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ - Koukyo Discord Bot (Go Edition)

## ğŸ—ï¸ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¦‚è¦

### ãƒ¬ã‚¤ãƒ¤ãƒ¼æ§‹é€ 

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   cmd/bot/main.go (ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  internal/handler (ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼)     â”‚
â”‚  - OnReady, OnMessage, OnInteraction    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  internal/commands (ã‚³ãƒãƒ³ãƒ‰ãƒ¬ã‚¸ã‚¹ãƒˆãƒª)    â”‚
â”‚  - çµ±ä¸€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹                    â”‚
â”‚  - ãƒ†ã‚­ã‚¹ãƒˆ/ã‚¹ãƒ©ãƒƒã‚·ãƒ¥ä¸¡å¯¾å¿œ               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â†“                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  internal/embeds â”‚    â”‚  internal/utils  â”‚
â”‚  (è¡¨ç¤ºãƒ­ã‚¸ãƒƒã‚¯)    â”‚    â”‚  (ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â†“                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       internal/models (ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“¦ ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«è©³ç´°

### 1. `cmd/bot` - ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ

**è²¬å‹™:**
- ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®åˆæœŸåŒ–
- Discord ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®ç¢ºç«‹
- ã‚°ãƒ¬ãƒ¼ã‚¹ãƒ•ãƒ«ã‚·ãƒ£ãƒƒãƒˆãƒ€ã‚¦ãƒ³

**ä¸»è¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ:**
```go
const BotVersion = "1.0.0-go"

func main() {
    // 1. è¨­å®šèª­ã¿è¾¼ã¿
    cfg := config.Load()
    
    // 2. Botæƒ…å ±åˆæœŸåŒ–
    botInfo := models.NewBotInfo(BotVersion)
    
    // 3. ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ç™»éŒ²
    h := handler.NewHandler("!", botInfo)
    
    // 4. Discordæ¥ç¶š
    dg.Open()
}
```

### 2. `internal/handler` - ã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†

**è²¬å‹™:**
- Discordã‚¤ãƒ™ãƒ³ãƒˆã®å—ä¿¡ã¨æŒ¯ã‚Šåˆ†ã‘
- ã‚¹ãƒ©ãƒƒã‚·ãƒ¥ã‚³ãƒãƒ³ãƒ‰ã®åŒæœŸ
- ã‚³ãƒãƒ³ãƒ‰ãƒ¬ã‚¸ã‚¹ãƒˆãƒªã®ç®¡ç†

**ä¸»è¦ãƒ¡ã‚½ãƒƒãƒ‰:**
- `OnReady()` - Botèµ·å‹•æ™‚ã®åˆæœŸåŒ–
- `OnMessage()` - ãƒ†ã‚­ã‚¹ãƒˆã‚³ãƒãƒ³ãƒ‰ã®å‡¦ç†
- `OnInteractionCreate()` - ã‚¹ãƒ©ãƒƒã‚·ãƒ¥ã‚³ãƒãƒ³ãƒ‰ã®å‡¦ç†
- `SyncSlashCommands()` - ã‚¹ãƒ©ãƒƒã‚·ãƒ¥ã‚³ãƒãƒ³ãƒ‰ã®ç™»éŒ²
- `Cleanup()` - çµ‚äº†æ™‚ã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—

### 3. `internal/commands` - ã‚³ãƒãƒ³ãƒ‰ã‚·ã‚¹ãƒ†ãƒ 

#### ã‚³ãƒãƒ³ãƒ‰ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
```go
type Command interface {
    Name() string
    Description() string
    ExecuteText(s *discordgo.Session, m *discordgo.MessageCreate, args []string) error
    ExecuteSlash(s *discordgo.Session, i *discordgo.InteractionCreate) error
    SlashDefinition() *discordgo.ApplicationCommand
}
```

#### å®Ÿè£…æ¸ˆã¿ã‚³ãƒãƒ³ãƒ‰ä¸€è¦§

| ã‚³ãƒãƒ³ãƒ‰ | ãƒ•ã‚¡ã‚¤ãƒ« | èª¬æ˜ | ä¾å­˜ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ« |
|---------|---------|------|--------------|
| `ping` | `ping.go` | ç–é€šç¢ºèª | ãªã— |
| `help` | `help.go` | ã‚³ãƒãƒ³ãƒ‰ä¸€è¦§ | `Registry` |
| `info` | `info.go` | Botæƒ…å ± | `models.BotInfo`, `embeds` |
| `now` | `now.go` | ç›£è¦–çŠ¶æ³ | `embeds` |
| `time` | `time.go` | ç¾åœ¨æ™‚åˆ» | `embeds`, `utils.timezone` |
| `convert` | `convert.go` | åº§æ¨™å¤‰æ› | `embeds`, `utils.coordinator` |

#### Registry ãƒ‘ã‚¿ãƒ¼ãƒ³

```go
type Registry struct {
    commands map[string]Command
}

// ã‚³ãƒãƒ³ãƒ‰ã®ç™»éŒ²
registry.Register(&commands.PingCommand{})
registry.Register(commands.NewInfoCommand(botInfo))

// ã‚³ãƒãƒ³ãƒ‰ã®å–å¾—
cmd, exists := registry.Get("ping")
```

### 4. `internal/utils` - ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«

#### `coordinator.go` - åº§æ¨™å¤‰æ›ã‚·ã‚¹ãƒ†ãƒ 

**å®šæ•°:**
```go
const (
    WplaceZoom = 11          // ã‚ºãƒ¼ãƒ ãƒ¬ãƒ™ãƒ«
    WplaceTileSize = 1000    // ã‚¿ã‚¤ãƒ«1æšã®ã‚µã‚¤ã‚º
    WplaceTilesPerEdge = 2048 // 1è¾ºã®ã‚¿ã‚¤ãƒ«æ•°
)
```

**ä¸»è¦é–¢æ•°:**
- `LngLatToTilePixel(lng, lat)` - çµŒåº¦ç·¯åº¦ â†’ ãƒ”ã‚¯ã‚»ãƒ«åº§æ¨™
- `TilePixelToLngLat(tileX, tileY, pixelX, pixelY)` - ãƒ”ã‚¯ã‚»ãƒ«åº§æ¨™ â†’ çµŒåº¦ç·¯åº¦
- `BuildWplaceURL(lng, lat, zoom)` - Wplace URLç”Ÿæˆ
- `FormatHyphenCoords(coord)` - ãƒã‚¤ãƒ•ãƒ³å½¢å¼æ–‡å­—åˆ—ç”Ÿæˆ

**åº§æ¨™å¤‰æ›ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ :**
1. **Webãƒ¡ãƒ«ã‚«ãƒˆãƒ«æŠ•å½±** ã‚’ä½¿ç”¨
2. çµŒåº¦: ç·šå½¢å¤‰æ› `(lng + 180) / 360 * n`
3. ç·¯åº¦: åŒæ›²ç·šæ­£æ¥ã‚’ä½¿ã£ãŸéç·šå½¢å¤‰æ› `asinh(tan(lat))`

#### `timezone.go` - ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³å‡¦ç†

**ã‚µãƒãƒ¼ãƒˆã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³:**
- UTC (å”å®šä¸–ç•Œæ™‚)
- America/Los_Angeles (ã‚µãƒ³ã‚¿ã‚¯ãƒ©ãƒ© PST/PDT)
- Europe/Paris (ãƒ•ãƒ©ãƒ³ã‚¹ CET/CEST)
- Asia/Tokyo (æ—¥æœ¬æ¨™æº–æ™‚ JST)

**ä¸»è¦é–¢æ•°:**
- `GetCommonTimezones()` - ã‚ˆãä½¿ã†ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ä¸€è¦§å–å¾—
- `ParseTimezone(tzName)` - çŸ­ç¸®å½¢ã‹ã‚‰Locationå–å¾—
- `FormatTimeInTimezone(t, loc)` - æŒ‡å®šã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã§ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ

### 5. `internal/embeds` - åŸ‹ã‚è¾¼ã¿ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ç”Ÿæˆ

**è²¬å‹™:**
- Discord Embed ã®æ§‹ç¯‰
- ä¸€è²«ã—ãŸãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ã‚¹ã‚¿ã‚¤ãƒ«
- ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®çµ±ä¸€

**ä¸»è¦é–¢æ•°:**
| é–¢æ•° | ç”¨é€” | ã‚«ãƒ©ãƒ¼ |
|------|------|--------|
| `BuildInfoEmbed()` | Botæƒ…å ± | Gold (0xFFD700) |
| `BuildTimeEmbed()` | ç¾åœ¨æ™‚åˆ» | Blue (0x3498DB) |
| `BuildConvertLngLatEmbed()` | åº§æ¨™å¤‰æ›ï¼ˆçµŒåº¦ç·¯åº¦â†’ãƒ”ã‚¯ã‚»ãƒ«ï¼‰ | Purple (0x9B59B6) |
| `BuildConvertPixelEmbed()` | åº§æ¨™å¤‰æ›ï¼ˆãƒ”ã‚¯ã‚»ãƒ«â†’çµŒåº¦ç·¯åº¦ï¼‰ | Turquoise (0x1ABC9C) |
| `BuildNowEmbed()` | ç›£è¦–çŠ¶æ³ | Blue (0x3498DB) |

### 6. `internal/models` - ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«

#### `BotInfo` æ§‹é€ ä½“
```go
type BotInfo struct {
    Version   string
    StartTime time.Time
}

func (b *BotInfo) Uptime() time.Duration
```

**å½¹å‰²:**
- Botèµ·å‹•æ™‚åˆ»ã®è¨˜éŒ²
- ç¨¼åƒæ™‚é–“ã®è¨ˆç®—
- ãƒãƒ¼ã‚¸ãƒ§ãƒ³æƒ…å ±ã®ä¿æŒ

### 7. `internal/config` - è¨­å®šç®¡ç†

**ç¾åœ¨ã®å®Ÿè£…:**
```go
type Config struct {
    Token string  // ç’°å¢ƒå¤‰æ•° DISCORD_TOKEN ã‹ã‚‰èª­ã¿è¾¼ã¿
}
```

**ä»Šå¾Œã®æ‹¡å¼µ:**
- JSONè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚µãƒãƒ¼ãƒˆ
- ã‚µãƒ¼ãƒãƒ¼ã”ã¨ã®è¨­å®šç®¡ç†
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šæƒ…å ±

## ğŸ”„ ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œãƒ•ãƒ­ãƒ¼

### ãƒ†ã‚­ã‚¹ãƒˆã‚³ãƒãƒ³ãƒ‰ã®å ´åˆ

```
1. ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒ "!convert 139.7794 35.6833" ã¨å…¥åŠ›
   â†“
2. handler.OnMessage() ãŒãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å—ä¿¡
   â†“
3. ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ "!" ã‚’ãƒã‚§ãƒƒã‚¯
   â†“
4. ã‚³ãƒãƒ³ãƒ‰å "convert" ã¨å¼•æ•° ["139.7794", "35.6833"] ã‚’ãƒ‘ãƒ¼ã‚¹
   â†“
5. registry.Get("convert") ã§ã‚³ãƒãƒ³ãƒ‰å–å¾—
   â†“
6. cmd.ExecuteText(s, m, args) ã‚’å®Ÿè¡Œ
   â†“
7. convert.go å†…ã§å¼•æ•°ã‚’ãƒ‘ãƒ¼ã‚¹
   â†“
8. utils.LngLatToTilePixel() ã§åº§æ¨™å¤‰æ›
   â†“
9. embeds.BuildConvertLngLatEmbed() ã§åŸ‹ã‚è¾¼ã¿ç”Ÿæˆ
   â†“
10. Discordãƒãƒ£ãƒ³ãƒãƒ«ã«é€ä¿¡
```

### ã‚¹ãƒ©ãƒƒã‚·ãƒ¥ã‚³ãƒãƒ³ãƒ‰ã®å ´åˆ

```
1. ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒ "/convert lng:139.7794 lat:35.6833" ã‚’å®Ÿè¡Œ
   â†“
2. handler.OnInteractionCreate() ãŒInteractionã‚’å—ä¿¡
   â†“
3. ã‚³ãƒãƒ³ãƒ‰å "convert" ã‚’å–å¾—
   â†“
4. registry.Get("convert") ã§ã‚³ãƒãƒ³ãƒ‰å–å¾—
   â†“
5. cmd.ExecuteSlash(s, i) ã‚’å®Ÿè¡Œ
   â†“
6. ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãƒãƒƒãƒ—ã‹ã‚‰ lng, lat ã‚’å–å¾—
   â†“
7. utils.LngLatToTilePixel() ã§åº§æ¨™å¤‰æ›
   â†“
8. embeds.BuildConvertLngLatEmbed() ã§åŸ‹ã‚è¾¼ã¿ç”Ÿæˆ
   â†“
9. InteractionRespond ã§å¿œç­”
```

## ğŸ³ Dockeræ§‹æˆ

### ãƒãƒ«ãƒã‚¹ãƒ†ãƒ¼ã‚¸ãƒ“ãƒ«ãƒ‰

```dockerfile
# Stage 1: ãƒ“ãƒ«ãƒ‰
FROM golang:1.21-alpine AS builder
WORKDIR /app
COPY . .
RUN go mod tidy && go build -o bot ./cmd/bot

# Stage 2: å®Ÿè¡Œç’°å¢ƒ
FROM alpine:latest
WORKDIR /app
COPY --from=builder /app/bot ./bot
CMD ["./bot"]
```

**ãƒ¡ãƒªãƒƒãƒˆ:**
- æœ€çµ‚ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚µã‚¤ã‚ºãŒå°ã•ã„ï¼ˆç´„15MBï¼‰
- ãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«ãŒå«ã¾ã‚Œãªã„
- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒªã‚¹ã‚¯ã®ä½æ¸›

### Docker Compose

```yaml
services:
  discord-bot:
    build: .
    env_file:
      - .env
    restart: unless-stopped
```

## ğŸ§ª ãƒ†ã‚¹ãƒˆæˆ¦ç•¥ï¼ˆä»Šå¾Œå®Ÿè£…äºˆå®šï¼‰

### ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ
```go
// utils/coordinator_test.go
func TestLngLatToTilePixel(t *testing.T) {
    // æ±äº¬ï¼ˆçš‡å±…ï¼‰ã®åº§æ¨™ãƒ†ã‚¹ãƒˆ
    coord := LngLatToTilePixel(139.7594, 35.6850)
    // æœŸå¾…å€¤ã¨æ¯”è¼ƒ
}
```

### ã‚¤ãƒ³ãƒ†ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ†ã‚¹ãƒˆ
- ãƒ¢ãƒƒã‚¯Discordã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’ä½¿ã£ãŸã‚³ãƒãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆ
- ã‚¨ãƒ³ãƒ‰ãƒ„ãƒ¼ã‚¨ãƒ³ãƒ‰ã®ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œãƒ•ãƒ­ãƒ¼æ¤œè¨¼

## ğŸ“ˆ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è€ƒæ…®äº‹é …

### ãƒ¡ãƒ¢ãƒªåŠ¹ç‡
- æ§‹é€ ä½“ã®ãƒã‚¤ãƒ³ã‚¿æ¸¡ã—ã‚’æ´»ç”¨
- ä¸è¦ãªã‚³ãƒ”ãƒ¼ã‚’é¿ã‘ã‚‹
- Embedç”Ÿæˆæ™‚ã®æ–‡å­—åˆ—é€£çµã‚’æœ€é©åŒ–

### ä¸¦è¡Œå‡¦ç†
- Goã®goroutineã‚’æ´»ç”¨ï¼ˆä»Šå¾Œã®WebSocketç›£è¦–ã§ä½¿ç”¨äºˆå®šï¼‰
- ãƒãƒ£ãƒãƒ«ã«ã‚ˆã‚‹å®‰å…¨ãªé€šä¿¡

### ãƒ¬ãƒ¼ãƒˆåˆ¶é™å¯¾ç­–
- Discord API ã®ãƒ¬ãƒ¼ãƒˆåˆ¶é™ã‚’è€ƒæ…®
- ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚­ãƒ¥ãƒ¼ã‚¤ãƒ³ã‚°ï¼ˆä»Šå¾Œå®Ÿè£…ï¼‰

## ğŸ” ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

### ç’°å¢ƒå¤‰æ•°ç®¡ç†
- `.env` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ `.gitignore` ã«è¿½åŠ 
- Dockerã‚³ãƒ³ãƒ†ãƒŠã«ç›´æ¥åŸ‹ã‚è¾¼ã¾ãªã„
- `env_file` ã§å®‰å…¨ã«æ¸¡ã™

### å…¥åŠ›æ¤œè¨¼
- ã‚¹ãƒ©ãƒƒã‚·ãƒ¥ã‚³ãƒãƒ³ãƒ‰ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³å‹ãƒã‚§ãƒƒã‚¯
- åº§æ¨™ç¯„å›²ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆä»Šå¾Œè¿½åŠ äºˆå®šï¼‰

## ğŸš€ ä»Šå¾Œã®å®Ÿè£…äºˆå®š

### Phase 2: ãƒ¦ãƒ¼ã‚¶ãƒ¼è¿½è·¡
```go
// internal/storage/activity.go
type ActivityTracker struct {
    vandals   map[string]*UserActivity
    restorers map[string]*UserActivity
}
```

### Phase 3: WebSocketç›£è¦–
```go
// internal/monitor/websocket.go
type Monitor struct {
    ws     *websocket.Conn
    images chan *ImageData
}
```

### Phase 4: çµ±è¨ˆåˆ†æ
```go
// internal/analytics/stats.go
type StatisticsEngine struct {
    history []DiffRecord
}
```

## ğŸ“š å‚è€ƒè³‡æ–™

- [discordgo ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://github.com/bwmarrin/discordgo)
- [Discord API ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹](https://discord.com/developers/docs)
- [Webãƒ¡ãƒ«ã‚«ãƒˆãƒ«æŠ•å½±](https://en.wikipedia.org/wiki/Web_Mercator_projection)
- [Go ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ](https://github.com/golang-standards/project-layout)

---

**æœ€çµ‚æ›´æ–°:** 2026-01-22  
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³:** 1.0.0-go  
**ä½œæˆè€…:** Koukyo Bot Development Team
